import passport from 'passport'

{{#controllers}}
{{#if default}}
import {{name}}Api from './models/{{name}}/api.js'
{{else}}
import {{name}}Methods from './models/{{name}}/methods.js'
{{/if}}
{{/controllers}}

{{buildAPI_makeController controllers}}

const auth = passport.authenticate("jwt", { session: false })

// 3. Routes
const router = (app) => {
  console.log("Setup routes...")
  {{#routerEntries}}
  {{#if data}}
  {{#if data.method}}
  app.{{type}}("/{{lowercase name}}/{{path}}", {{#if data.middlewares}}[{{data.middlewares}}],{{/if}} {{name}}Controller.{{data.method}})
  {{else}}
  app.{{type}}("/{{lowercase name}}/{{path}}", {{#if data.middlewares}}[{{data.middlewares}}],{{/if}} {{name}}Controller.{{path}})
  {{/if}}
  {{/if}}
  {{/routerEntries}}
}

export default router
